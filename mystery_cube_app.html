<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Mystery Cube</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg:#0b1020;
      --brown:rgb(138,84,74);
      --blue:rgb(183,198,204);
      --dblue:rgb(99,148,199);
      --face-size:260px;
      --text:#0b1020;
      --panel:rgba(255,255,255,.08);
      --panel-border:rgba(255,255,255,.18);
    }
    html,body{height:100%;margin:0;background:var(--bg);color:#fff;font-family:sans-serif;overflow:hidden}
    #stage{position:fixed;inset:0;display:grid;place-items:center;}
    .scene{width:min(90vmin,560px);height:min(90vmin,560px);position:relative;perspective:900px;}
    .pivot{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-style:preserve-3d;transform-origin:50% 50% 0;}
    .cube{position:relative;width:var(--face-size);height:var(--face-size);transform-style:preserve-3d;transform-origin:50% 50% 0}
    .face{position:absolute;left:0;top:0;width:var(--face-size);height:var(--face-size);display:flex;align-items:center;justify-content:center;backface-visibility:hidden;box-shadow:0 12px 30px rgba(0,0,0,.25) inset,0 6px 30px rgba(0,0,0,.25);}
    .blank{box-shadow:none}
    .label{position:absolute;color:var(--text);font-weight:900;user-select:none}
    .label.center{font-size:44px;text-transform:uppercase;}
    .label.ur{top:10px;right:12px;font-size:28px}
    .label.ll{bottom:10px;left:12px;font-size:28px}
    .hint{position:fixed;left:12px;bottom:12px;padding:6px 10px;background:var(--panel);border:1px solid var(--panel-border);border-radius:8px;font-size:12px}
    .controls{position:fixed;right:12px;bottom:12px;display:flex;flex-wrap:wrap;gap:6px;background:var(--panel);border:1px solid var(--panel-border);border-radius:10px;padding:8px}
    button,.toggle{border:1px solid var(--panel-border);background:rgba(255,255,255,.06);color:#fff;padding:5px 9px;border-radius:8px;cursor:pointer;font-size:12px}
    button:hover{background:rgba(255,255,255,.12)}
    .toggle.on{background:rgba(0,200,120,.25)}
    .speed{width:100px}
  </style>
</head>
<body>
<div id="stage">
  <div class="scene" id="scene">
    <div class="pivot" id="pivot">
      <div class="cube" id="cube">
        <div class="face" data-face="front" style="background:var(--blue);transform:translateZ(calc(var(--face-size)/2));">
          <span class="label ur">6</span>
          <span class="label ll">2</span>
          <span class="label center">ALFRED</span>
        </div>
        <div class="face" data-face="back" style="background:var(--blue);transform:rotateY(180deg) translateZ(calc(var(--face-size)/2));">
          <span class="label ur">4</span>
          <span class="label ll">2</span>
          <span class="label center">ALMA</span>
        </div>
        <div class="face" data-face="right" style="background:var(--dblue);transform:rotateY(90deg) translateZ(calc(var(--face-size)/2));">
          <span class="label ur">7</span>
          <span class="label ll">3</span>
          <span class="label center">ROBERTA</span>
        </div>
        <div class="face" data-face="left" style="background:var(--dblue);transform:rotateY(-90deg) translateZ(calc(var(--face-size)/2));">
          <span class="label ur">3</span>
          <span class="label ll">3</span>
          <span class="label center">ROB</span>
        </div>
        <div class="face" data-face="top" style="background:var(--brown);transform:rotateX(90deg) translateZ(calc(var(--face-size)/2));">
          <span class="label ur">5</span>
          <span class="label ll">4</span>
          <span class="label center">FRANK</span>
        </div>
        <div class="face blank" data-face="bottom" style="background:#2a2f45;transform:rotateX(-90deg) translateZ(calc(var(--face-size)/2));"></div>
      </div>
    </div>
  </div>
</div>
<div class="hint">Drag to rotate • Scroll to zoom • Double-click to reset</div>
<div class="controls">
  <button id="homeBtn">Home</button>
  <button id="frontBtn">Front</button>
  <button id="leftBtn">Left</button>
  <button id="backBtn">Back</button>
  <button id="rightBtn">Right</button>
  <button id="topBtn">Top</button>
  <button id="spinToggle" class="toggle">▶ Auto</button>
  <input id="speed" class="speed" type="range" min="-120" max="120" value="30" step="1">
</div>
<script>
(function(){
  const scene=document.getElementById('scene');
  const pivot=document.getElementById('pivot');
  let dragging=false,lastX=0,lastY=0;
  let scale=1;let M=new DOMMatrix();
  function apply(){
    const t=`translate(-50%,-50%) matrix3d(${[M.m11,M.m12,M.m13,M.m14,M.m21,M.m22,M.m23,M.m24,M.m31,M.m32,M.m33,M.m34,0,0,0,1].join(',')}) scale3d(${scale},${scale},${scale})`;
    pivot.style.transform=t;
  }
  function setMatrix(rx,ry){M=new DOMMatrix().rotateSelf(rx,0,0).rotateSelf(0,ry,0);apply();}
  function setInitial(){scale=1;setMatrix(-22,28);}  
  scene.addEventListener('pointerdown',e=>{dragging=true;lastX=e.clientX;lastY=e.clientY;});
  scene.addEventListener('pointermove',e=>{if(!dragging)return;const dx=e.clientX-lastX,dy=e.clientY-lastY;lastX=e.clientX;lastY=e.clientY;const k=0.35;const RY=new DOMMatrix().rotateSelf(0,-dx*k,0);const RX=new DOMMatrix().rotateSelf(-dy*k,0,0);M=RX.multiply(RY.multiply(M));apply();});
  scene.addEventListener('pointerup',()=>dragging=false);
  scene.addEventListener('pointercancel',()=>dragging=false);
  scene.addEventListener('wheel',e=>{e.preventDefault();scale*=(e.deltaY<0?1.1:0.9);scale=Math.max(0.5,Math.min(2.5,scale));apply();},{passive:false});
  scene.addEventListener('dblclick',setInitial);
  const homeBtn=document.getElementById('homeBtn');
  const frontBtn=document.getElementById('frontBtn');
  const leftBtn=document.getElementById('leftBtn');
  const backBtn=document.getElementById('backBtn');
  const rightBtn=document.getElementById('rightBtn');
  const topBtn=document.getElementById('topBtn');
  const spinToggle=document.getElementById('spinToggle');
  const speed=document.getElementById('speed');
  let spinning=false,raf=null;
  function stepSpin(){if(!spinning){raf=null;return;}const deg=Number(speed.value)/60;const RY=new DOMMatrix().rotateSelf(0,deg,0);M=RY.multiply(M);apply();raf=requestAnimationFrame(stepSpin);} 
  function startSpin(){if(!spinning){spinning=true;spinToggle.classList.add('on');raf=requestAnimationFrame(stepSpin);}}
  function stopSpin(){spinning=false;spinToggle.classList.remove('on');if(raf){cancelAnimationFrame(raf);raf=null;}}
  spinToggle.addEventListener('click',()=>{spinning?stopSpin():startSpin();});
  function nudge(rx=0,ry=0){const RX=new DOMMatrix().rotateSelf(rx,0,0);const RY=new DOMMatrix().rotateSelf(0,ry,0);M=RX.multiply(RY.multiply(M));apply();}
  homeBtn.addEventListener('click',setInitial);
  frontBtn.addEventListener('click',()=>setMatrix(0,0));
  leftBtn.addEventListener('click',()=>setMatrix(0,90));
  backBtn.addEventListener('click',()=>setMatrix(0,180));
  rightBtn.addEventListener('click',()=>setMatrix(0,-90));
  topBtn.addEventListener('click',()=>setMatrix(-90,0));
  setInitial();
})();
</script>
</body>
</html>
